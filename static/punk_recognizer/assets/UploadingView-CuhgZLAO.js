import{r as p,c,o as i,a as o,u as f,n as b,w as V,b as j,d as D,e as C,f as T,g as Z}from"./main-pHqhdxKN.js";import{u as E}from"./index-7GxMMcvg.js";const N={class:"flex flex-col items-center justify-center gap-8 p-8 rounded-3xl bg-primary w-full max-w-[50rem]"},B={class:"flex items-center text-xl text-center text-[#c5c5c5] h-full"},G={key:0},I={key:1},P={__name:"DragAndDropZone",props:{modelValue:{type:File,required:!1,default:null}},emits:["update:modelValue"],setup(m,{emit:l}){const t=l,u=p(null),n=p(null),a=e=>{const s=["image/jpeg","image/png"],r=[".jpg",".jpeg",".png"],h=e.type,y=e.name.toLowerCase(),w=s.includes(h),k=r.some(v=>y.endsWith(v));if(!w||!k){alert("Допустимы только изображения в формате JPG, JPEG или PNG");return}t("update:modelValue",e)},g=e=>{e&&e.length===1&&a(e[0])},{isOverDropZone:d}=E(u,{onDrop:g,multiple:!1,preventDefaultForUnhandled:!0}),_=()=>{var e;(e=n.value)==null||e.click()},x=e=>{var r;const s=(r=e.target.files)==null?void 0:r[0];s&&a(s),e.target.value=""};return(e,s)=>(i(),c("div",N,[o("div",{ref_key:"dropZone",ref:u,class:b(["flex flex-1 flex-col items-center border-2 border-dashed border-[#c5c5c5] rounded-3xl w-full max-w-[46rem] aspect-[184/75]",{"cursor-pointer border-[#c5c5c5]/70":f(d)}])},[o("p",B,[f(d)?(i(),c("span",I,"Отпустите изображение")):(i(),c("span",G,"Перетащите своё изображение"))])],2),o("button",{class:"px-6 py-2 rounded-full bg-white text-black text-lg font-medium transition-colors hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-black/70 cursor-pointer",onClick:V(_,["stop"])},s[0]||(s[0]=[o("span",null,"Загрузить фото",-1)])),o("input",{ref_key:"fileInput",ref:n,type:"file",class:"hidden",accept:"image/*",onChange:x},null,544)]))}},S={class:"flex w-full h-auto items-center justify-center"},U={class:"flex flex-1 justify-center items-center p-8"},J={__name:"UploadingView",setup(m){const l=j(),t=p(null);return D(()=>{l.clearStore()}),C(t,async()=>{await l.createTask(t==null?void 0:t.value),Z.push({name:"processing"})}),(u,n)=>(i(),c("div",S,[o("div",U,[T(P,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=a=>t.value=a)},null,8,["modelValue"])])]))}};export{J as default};
