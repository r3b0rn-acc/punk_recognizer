import{w as I,g as W,o as z,s as C,c as U,t as g,u as k,r as j,a as b,b as x,d as v,n as $,e as B,f as M,h as G}from"./main-Dk9fpZTO.js";function N(n){return W()?(z(n),!0):!1}const L=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=Object.prototype.toString,q=n=>R.call(n)==="[object Object]";function E(n){return Array.isArray(n)?n:[n]}function P(n,o,a){return I(n,o,{...a,immediate:!0})}const H=L?window:void 0;function J(n){var o;const a=g(n);return(o=a==null?void 0:a.$el)!=null?o:a}function _(...n){const o=[],a=()=>{o.forEach(r=>r()),o.length=0},c=(r,e,l,p)=>(r.addEventListener(e,l,p),()=>r.removeEventListener(e,l,p)),s=U(()=>{const r=E(g(n[0])).filter(e=>e!=null);return r.every(e=>typeof e!="string")?r:void 0}),m=P(()=>{var r,e;return[(e=(r=s.value)==null?void 0:r.map(l=>J(l)))!=null?e:[H].filter(l=>l!=null),E(g(s.value?n[1]:n[0])),E(k(s.value?n[2]:n[1])),g(s.value?n[3]:n[2])]},([r,e,l,p])=>{if(a(),!(r!=null&&r.length)||!(e!=null&&e.length)||!(l!=null&&l.length))return;const D=q(p)?{...p}:p;o.push(...r.flatMap(V=>e.flatMap(T=>l.map(w=>c(V,T,w,D)))))},{flush:"post"}),f=()=>{m(),a()};return N(a),f}function K(n,o={}){var a,c;const s=C(!1),m=C(null);let f=0,r=!0;if(L){const e=typeof o=="function"?{onDrop:o}:o,l=(a=e.multiple)!=null?a:!0,p=(c=e.preventDefaultForUnhandled)!=null?c:!1,D=t=>{var u,d;const i=Array.from((d=(u=t.dataTransfer)==null?void 0:u.files)!=null?d:[]);return i.length===0?null:l?i:[i[0]]},V=t=>{const u=k(e.dataTypes);return typeof u=="function"?u(t):u!=null&&u.length?t.length===0?!1:t.every(d=>u.some(i=>d.includes(i))):!0},T=t=>{const u=Array.from(t??[]).map(y=>y.type),d=V(u),i=l||t.length<=1;return d&&i},w=()=>/^(?:(?!chrome|android).)*safari/i.test(navigator.userAgent)&&!("chrome"in window),h=(t,u)=>{var d,i,y,O,S,A;const F=(d=t.dataTransfer)==null?void 0:d.items;if(r=(i=F&&T(F))!=null?i:!1,p&&t.preventDefault(),!w()&&!r){t.dataTransfer&&(t.dataTransfer.dropEffect="none");return}t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="copy");const Z=D(t);switch(u){case"enter":f+=1,s.value=!0,(y=e.onEnter)==null||y.call(e,null,t);break;case"over":(O=e.onOver)==null||O.call(e,null,t);break;case"leave":f-=1,f===0&&(s.value=!1),(S=e.onLeave)==null||S.call(e,null,t);break;case"drop":f=0,s.value=!1,r&&(m.value=Z,(A=e.onDrop)==null||A.call(e,Z,t));break}};_(n,"dragenter",t=>h(t,"enter")),_(n,"dragover",t=>h(t,"over")),_(n,"dragleave",t=>h(t,"leave")),_(n,"drop",t=>h(t,"drop"))}return{files:m,isOverDropZone:s}}const Q={class:"flex flex-col items-center justify-center gap-8 p-8 rounded-3xl bg-primary w-full max-w-[50rem]"},X={class:"flex items-center text-xl text-center text-[#c5c5c5] h-full"},Y={key:0},ee={key:1},te={__name:"DragAndDropZone",props:{modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup(n,{emit:o}){const a=o,c=j(null),s=j(null),m=e=>{if(e&&e.length===1){const l=e[0];if(!l.type.startsWith("image")){alert("Файл должен быть изображением");return}a("update:modelValue",{name:l.name,size:l.size,type:l.type})}},{isOverDropZone:f}=K(c,{onDrop:m,multiple:!1,preventDefaultForUnhandled:!0}),r=()=>{var e;(e=s.value)==null||e.click()};return(e,l)=>(x(),b("div",Q,[v("div",{ref_key:"dropZone",ref:c,class:$(["flex flex-1 flex-col items-center border-2 border-dashed border-[#c5c5c5] rounded-3xl w-full max-w-[46rem] aspect-[184/75]",{"cursor-pointer border-[#c5c5c5]/70":k(f)}])},[v("p",X,[k(f)?(x(),b("span",ee,"Отпустите изображение")):(x(),b("span",Y,"Перетащите своё изображение"))])],2),v("button",{class:"px-6 py-2 rounded-full bg-white text-black text-lg font-medium transition-colors hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-black/70",onClick:B(r,["stop"])},l[0]||(l[0]=[v("span",null,"Загрузить фото",-1)])),v("input",{ref_key:"fileInput",ref:s,type:"file",class:"hidden",accept:"image/*"},null,512)]))}},ne={class:"flex w-full h-auto items-center justify-center"},le={class:"flex flex-1 justify-center items-center p-8"},oe={__name:"RecognizerView",setup(n){const o=j(null);return I(o,()=>{G.push({name:"processing"})}),(a,c)=>(x(),b("div",ne,[v("div",le,[M(te,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=s=>o.value=s)},null,8,["modelValue"])])]))}};export{oe as default};
