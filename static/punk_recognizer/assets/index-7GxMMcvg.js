import{e as W,v as j,x as R,q as $,y as g,u as C,z as F}from"./main-pHqhdxKN.js";function x(t){return j()?(R(t),!0):!1}const S=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const q=Object.prototype.toString,G=t=>q.call(t)==="[object Object]",T=()=>{},U=Z();function Z(){var t,a;return S&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((a=window==null?void 0:window.navigator)==null?void 0:a.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function D(t){return Array.isArray(t)?t:[t]}function z(t,a,s){return W(t,a,{...s,immediate:!0})}const V=S?window:void 0;function A(t){var a;const s=g(t);return(a=s==null?void 0:s.$el)!=null?a:s}function y(...t){const a=[],s=()=>{a.forEach(l=>l()),a.length=0},u=(l,o,i,f)=>(l.addEventListener(o,i,f),()=>l.removeEventListener(o,i,f)),d=$(()=>{const l=D(g(t[0])).filter(o=>o!=null);return l.every(o=>typeof o!="string")?l:void 0}),w=z(()=>{var l,o;return[(o=(l=d.value)==null?void 0:l.map(i=>A(i)))!=null?o:[V].filter(i=>i!=null),D(g(d.value?t[1]:t[0])),D(C(d.value?t[2]:t[1])),g(d.value?t[3]:t[2])]},([l,o,i,f])=>{if(s(),!(l!=null&&l.length)||!(o!=null&&o.length)||!(i!=null&&i.length))return;const E=G(f)?{...f}:f;a.push(...l.flatMap(b=>o.flatMap(m=>i.map(k=>u(b,m,k,E)))))},{flush:"post"}),p=()=>{w(),s()};return x(s),p}let M=!1;function N(t,a,s={}){const{window:u=V,ignore:d=[],capture:w=!0,detectIframe:p=!1,controls:l=!1}=s;if(!u)return l?{stop:T,cancel:T,trigger:T}:T;if(U&&!M){M=!0;const e={passive:!0};Array.from(u.document.body.children).forEach(n=>n.addEventListener("click",T,e)),u.document.documentElement.addEventListener("click",T,e)}let o=!0;const i=e=>g(d).some(n=>{if(typeof n=="string")return Array.from(u.document.querySelectorAll(n)).some(r=>r===e.target||e.composedPath().includes(r));{const r=A(n);return r&&(e.target===r||e.composedPath().includes(r))}});function f(e){const n=g(e);return n&&n.$.subTree.shapeFlag===16}function E(e,n){const r=g(e),c=r.$.subTree&&r.$.subTree.children;return c==null||!Array.isArray(c)?!1:c.some(h=>h.el===n.target||n.composedPath().includes(h.el))}const b=e=>{const n=A(t);if(e.target!=null&&!(!(n instanceof Element)&&f(t)&&E(t,e))&&!(!n||n===e.target||e.composedPath().includes(n))){if("detail"in e&&e.detail===0&&(o=!i(e)),!o){o=!0;return}a(e)}};let m=!1;const k=[y(u,"click",e=>{m||(m=!0,setTimeout(()=>{m=!1},0),b(e))},{passive:!0,capture:w}),y(u,"pointerdown",e=>{const n=A(t);o=!i(e)&&!!(n&&!e.composedPath().includes(n))},{passive:!0}),p&&y(u,"blur",e=>{setTimeout(()=>{var n;const r=A(t);((n=u.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(r!=null&&r.contains(u.document.activeElement))&&a(e)},0)},{passive:!0})].filter(Boolean),v=()=>k.forEach(e=>e());return l?{stop:v,cancel:()=>{o=!1},trigger:e=>{o=!0,b(e),o=!1}}:v}function H(t,a={}){var s,u;const d=F(!1),w=F(null);let p=0,l=!0;if(S){const o=typeof a=="function"?{onDrop:a}:a,i=(s=o.multiple)!=null?s:!0,f=(u=o.preventDefaultForUnhandled)!=null?u:!1,E=e=>{var n,r;const c=Array.from((r=(n=e.dataTransfer)==null?void 0:n.files)!=null?r:[]);return c.length===0?null:i?c:[c[0]]},b=e=>{const n=C(o.dataTypes);return typeof n=="function"?n(e):n!=null&&n.length?e.length===0?!1:e.every(r=>n.some(c=>r.includes(c))):!0},m=e=>{const n=Array.from(e??[]).map(h=>h.type),r=b(n),c=i||e.length<=1;return r&&c},k=()=>/^(?:(?!chrome|android).)*safari/i.test(navigator.userAgent)&&!("chrome"in window),v=(e,n)=>{var r,c,h,O,P,_;const I=(r=e.dataTransfer)==null?void 0:r.items;if(l=(c=I&&m(I))!=null?c:!1,f&&e.preventDefault(),!k()&&!l){e.dataTransfer&&(e.dataTransfer.dropEffect="none");return}e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="copy");const L=E(e);switch(n){case"enter":p+=1,d.value=!0,(h=o.onEnter)==null||h.call(o,null,e);break;case"over":(O=o.onOver)==null||O.call(o,null,e);break;case"leave":p-=1,p===0&&(d.value=!1),(P=o.onLeave)==null||P.call(o,null,e);break;case"drop":p=0,d.value=!1,l&&(w.value=L,(_=o.onDrop)==null||_.call(o,L,e));break}};y(t,"dragenter",e=>v(e,"enter")),y(t,"dragover",e=>v(e,"over")),y(t,"dragleave",e=>v(e,"leave")),y(t,"drop",e=>v(e,"drop"))}return{files:w,isOverDropZone:d}}export{N as o,H as u};
